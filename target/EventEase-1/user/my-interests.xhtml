<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>
        <title>My Interests - EventEase</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                background-color: #0b043a !important;
                color: #F4F0F8;
                font-family: "Segoe UI", Arial, sans-serif;
                overflow-x: hidden;
            }

            /* Header */
            .interests-header {
                background: #0b043a !important;
                backdrop-filter: blur(6px);
                padding: 15px 40px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                box-shadow: 0 2px 10px rgba(1,1,1,1.2);
                position: sticky;
                top: 0;
                z-index: 1000;
            }

            .logo-img {
                height: 55px;
                cursor: pointer;
            }

            /* Page Title */
            .page-title-section {
                padding: 40px 40px 20px;
                max-width: 1400px;
                margin: 0 auto;
            }

            .page-title {
                font-size: 36px;
                font-weight: bold;
                color: #C8B8E8;
                margin-bottom: 10px;
            }

            .page-subtitle {
                color: #A89BBF;
                font-size: 16px;
            }

            /* Main Container */
            .interests-container {
                max-width: 1400px;
                margin: 0 auto 60px;
                padding: 0 40px;
            }

            /* Interests Grid */
            .interests-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 30px;
                margin-top: 30px;
            }

            /* Interest Card */
            .interest-card {
                background: rgba(255, 255, 255, 0.06);
                backdrop-filter: blur(10px);
                border-radius: 16px;
                overflow: hidden;
                transition: all 0.3s;
                box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                position: relative;
            }

            .interest-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 30px rgba(168, 155, 191, 0.4);
            }

            .event-image {
                width: 100%;
                height: 200px;
                object-fit: cover;
            }

            .interest-badge {
                position: absolute;
                top: 15px;
                right: 15px;
                background: #0b043a !important;
                backdrop-filter: blur(5px);
                padding: 8px 15px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: bold;
                color: #F4F0F8;
            }

            .event-content {
                padding: 20px;
            }

            .event-name {
                font-size: 20px;
                font-weight: bold;
                color: #F4F0F8;
                margin-bottom: 12px;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
                cursor: pointer;
            }

            .event-name:hover {
                color: #C8B8E8;
            }

            .event-info {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-bottom: 8px;
                color: #C8B8E8;
                font-size: 14px;
            }

            .event-info i {
                width: 16px;
                color: #A89BBF;
            }

            .interest-date {
                margin-top: 15px;
                padding-top: 15px;
                border-top: 1px solid rgba(168, 155, 191, 0.2);
                color: #A89BBF;
                font-size: 13px;
            }

            .event-actions {
                display: flex;
                gap: 10px;
                margin-top: 15px;
            }

            .view-btn, .remove-btn {
                flex: 1;
                padding: 10px;
                border: none;
                border-radius: 8px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s;
            }

            .view-btn {
                background: #9273d1 !important;
                color: #F4F0F8;
                font-size: 15.2px;
            }

            .view-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 4px 15px rgba(168, 155, 191, 0.4);
            }

            .remove-btn {
                background: #5a428a !important;
                color: #EF5350;
                border: 1px solid #6b50a1 !important;
            }

            .remove-btn:hover {
                background: rgba(239, 83, 80, 0.3);
            }

            /* No Interests */
            .no-interests {
                text-align: center;
                padding: 80px 20px;
                background: rgba(255, 255, 255, 0.04);
                border-radius: 16px;
                margin-top: 30px;
            }

            .no-interests i {
                font-size: 64px;
                color: #A89BBF;
                opacity: 0.5;
                margin-bottom: 20px;
            }

            .no-interests h3 {
                font-size: 24px;
                color: #C8B8E8;
                margin-bottom: 10px;
            }

            .no-interests p {
                color: #A89BBF;
                font-size: 16px;
                margin-bottom: 20px;
            }

            .browse-btn {
                padding: 12px 30px;
                background: linear-gradient(135deg, #A89BBF, #8B7BA8);
                border: none;
                border-radius: 8px;
                color: #F4F0F8;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s;
            }

            .browse-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 4px 15px rgba(168, 155, 191, 0.4);
            }

            /* Footer */
            .footer {
                background: rgba(255, 255, 255, 0.04);
                padding: 25px 40px;
                text-align: center;
                color: #c8c0d8;
                font-size: 14px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }

            /* Responsive */
            @media (max-width: 768px) {
                .interests-container, .page-title-section {
                    padding: 0 20px;
                }

                .page-title {
                    font-size: 28px;
                }

                .interests-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>
    </h:head>

    <h:body>
        <p:growl id="msgs" showDetail="true" life="3000"/>

        <!-- Header -->
        <div class="interests-header">
            <h:graphicImage library="images" name="EventEase.png" 
                            styleClass="logo-img" 
                            alt="EventEase"
                            onclick="window.location = 'Home.jsf'"/>
        </div>

        <!-- Page Title -->
        <div class="page-title-section">
            <h1 class="page-title">
                <i class="fas fa-heart"></i> My Interests
            </h1>
            <p class="page-subtitle">Events you've shown interest in</p>
        </div>

        <!-- Interests Container -->
        <div class="interests-container">
            <h:form id="interestsForm">
                <!-- Interests Grid -->
                <p:outputPanel rendered="#{not empty myInterestsBean.userInterests}">
                    <div class="interests-grid">
                        <ui:repeat value="#{myInterestsBean.userInterests}" var="interest">
                            <div class="interest-card">
                                <h:graphicImage value="/#{interest.eId.bannerImg}" 
                                                styleClass="event-image"
                                                alt="#{interest.eId.eName}"/>

                                <div class="interest-badge">
                                    <i class="fas fa-heart"></i> Interested
                                </div>

                                <div class="event-content">
                                    <h3 class="event-name" 
                                        onclick="window.location = 'event-details.jsf?eId=#{interest.eId.eId}'">
                                        #{interest.eId.eName}
                                    </h3>

                                    <div class="event-info">
                                        <i class="far fa-calendar-alt"></i>
                                        <h:outputText value="#{interest.eId.eventDate}">
                                            <f:converter converterId="localDateConverter"/>
                                        </h:outputText>
                                    </div>

                                    <div class="event-info">
                                        <i class="far fa-clock"></i>
                                        <h:outputText value="#{interest.eId.startTime}"/>
                                    </div>

                                    <div class="event-info">
                                        <i class="fas fa-map-marker-alt"></i>
                                        #{interest.eId.vId.vName}, #{interest.eId.vId.vCity}
                                    </div>

                                    <div class="event-info">
                                        <i class="fas fa-tag"></i>
                                        ₹<h:outputText value="#{interest.eId.unitPrice}">
                                            <f:convertNumber type="number" groupingUsed="true"/>
                                        </h:outputText>
                                    </div>

                                    <div class="interest-date">
                                        <i class="fas fa-clock"></i>
                                        Added on: <h:outputText value="#{interest.interestDate}">
                                            <f:convertDateTime pattern="MMM dd, yyyy HH:mm" />
                                        </h:outputText>
                                    </div>

                                    <div class="event-actions">
                                        <button type="button" class="view-btn" 
                                                onclick="window.location = 'event-details.jsf?id=#{interest.eId.eId}'">
                                            <i class="fas fa-eye"></i> View Details
                                        </button>
                                        <p:commandButton styleClass="remove-btn" 
                                                         value="Remove"
                                                         icon="fas fa-times"
                                                         actionListener="#{myInterestsBean.removeInterest(interest.iId)}"
                                                         update="interestsForm msgs"
                                                         onclick="return confirm('Remove this event from interests?');">
                                            <p:ajax update="interestsForm msgs" />
                                        </p:commandButton>
                                    </div>
                                </div>
                            </div>
                        </ui:repeat>
                    </div>
                </p:outputPanel>

                <!-- No Interests -->
                <p:outputPanel rendered="#{empty myInterestsBean.userInterests}">
                    <div class="no-interests">
                        <i class="fas fa-heart-broken"></i>
                        <h3>No Interests Yet</h3>
                        <p>You haven't shown interest in any events. Start exploring!</p>
                        <button type="button" class="browse-btn" onclick="window.location = 'Home.jsf'">
                            <i class="fas fa-search"></i> Browse Events
                        </button>
                    </div>
                </p:outputPanel>
            </h:form>
        </div>

        <!-- Footer -->
        <div class="footer">
            © 2025 EventEase. All rights reserved.
        </div>
    </h:body>
</html>