<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    
    <f:metadata>
        <f:viewAction action="#{userReportBean.init}" />
    </f:metadata>

    <h:form id="userReportForm">

        <!-- MESSAGES -->
<!--        <p:messages id="msgs" showDetail="true" autoUpdate="true" />-->

        <h2 style="margin-bottom: 12px;">User Report</h2>

        <!-- TOOLBAR -->
        <p:toolbar style="margin-bottom: 10px;">
            <p:toolbarGroup>
                <p:commandButton value="Refresh" 
                                 icon="pi pi-refresh"
                                 actionListener="#{userReportBean.refresh}"
                                 update="userTable msgs"
                                 styleClass="ui-button-info commandButton" />
                
<!--                <p:commandButton value="Export PDF" 
                                 icon="pi pi-file-pdf"
                                 ajax="false"
                                 styleClass="ui-button-danger">
                    <p:dataExporter type="pdf" target="userTable" fileName="user-report" />
                </p:commandButton>-->
                
                <p:commandButton value="Export Excel" 
                                 icon="pi pi-file-excel"
                                 ajax="false"
                                 styleClass="ui-button-success commandButton">
                    <p:dataExporter type="xlsx" target="userTable" fileName="user-report" />
                </p:commandButton>
                
                <p:commandButton value="Export CSV" 
                                 icon="pi pi-file"
                                 ajax="false"
                                 styleClass="ui-button-warning commandButton">
                    <p:dataExporter type="csv" target="userTable" fileName="user-report" />
                </p:commandButton>
            </p:toolbarGroup>
        </p:toolbar>

        <!-- USER DATA TABLE -->
        <p:dataTable id="userTable" 
                     var="user"
                     value="#{userReportBean.users}"
                     paginator="true" 
                     rows="10"
                     rowsPerPageTemplate="5,10,15,20,25"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                     currentPageReportTemplate="Showing {startRecord}-{endRecord} of {totalRecords} users"
                     selectionMode="single"
                     selection="#{userReportBean.selectedUser}"
                     rowKey="#{user.userId}"
                     filterDelay="300"
                     emptyMessage="No users found"
                     styleClass="table-responsive">

            <!-- User ID Column -->
            <p:column headerText="ID" 
                      sortBy="#{user.userId}" 
                      filterBy="#{user.userId}"
                      filterMatchMode="contains"
                      style="width: 8%">
                <h:outputText value="#{user.userId}" />
            </p:column>
            
            <!-- UserName Column -->
            <p:column headerText="Username" 
                      sortBy="#{user.username}" 
                      filterBy="#{user.username}"
                      filterMatchMode="contains">
                <h:outputText value="#{user.username}" />
            </p:column>
            
            <!-- Full Name Column -->
            <p:column headerText="Full Name" 
                      sortBy="#{user.fullName}" 
                      filterBy="#{user.fullName}"
                      filterMatchMode="contains">
                <h:outputText value="#{user.fullName}" />
            </p:column>

            <!-- Email Column -->
            <p:column headerText="Email" 
                      sortBy="#{user.email}" 
                      filterBy="#{user.email}"
                      filterMatchMode="contains">
                <h:outputText value="#{user.email}" />
            </p:column>

            <!-- Phone Column -->
            <p:column headerText="Phone" 
                      filterBy="#{user.phone}"
                      filterMatchMode="contains"
                      style="width: 12%">
                <h:outputText value="#{user.phone}" />
            </p:column>                                   

        </p:dataTable>

    </h:form>
    
    <style>
        .table-responsive {
            width: 100%;
            overflow-x: auto;
        }
        .commandButton{
            margin-right: 5px !important;
        }
    </style>

</ui:composition>